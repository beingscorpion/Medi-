{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQ</title>
    <link href="{% static 'css/mcq.css' %}" rel="stylesheet">
    <!-- MathJax for rendering mathematical expressions -->
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" defer></script>
</head>
<body>
    <div class="page">
        <div class="top-bar">
            <a href="#" class="back-btn" id="back-btn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
                </svg>
                <span>Back</span>
            </a>
            <div class="progress" id="progress-text">1<span>/1</span></div>
        </div>

        <h1 id="test-title">Practice Test</h1>
        <div class="subtitle-container">
            <div class="subtitle">Answer the below question</div>
            {% if user.is_authenticated %}
            <svg class="report-icon" id="report-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path>
                <line x1="4" y1="22" x2="4" y2="15"></line>
            </svg>
            {% endif %}
        </div>

        <div class="card">
            <div class="counter" id="question-counter">Question 1</div>
            <div class="question-text" id="question-text"></div>

            <h4>Option</h4>
            <div class="options" id="options-container"></div>
        </div>

        <div class="feedback" id="feedback">
            <h4 id="feedback-title">Feedback</h4>
            <div class="answer" id="feedback-answer"></div>
            <div class="explanation-title">Explanation</div>
            <p class="explanation" id="feedback-explanation"></p>
        </div>

        <div class="navigation-container">
            <button class="nav-arrow" id="prev-btn" disabled>←</button>
            <div class="cta">
                <button type="button" id="next-btn" disabled>Next Question →</button>
            </div>
        </div>
    </div>

<script>
    // Initialize variables from Django template context
    const questionData = JSON.parse('{{ questions_json|escapejs }}');
    const title = '{{ test_title|default:"Practice Test" }}';
    const isPastPaper = {{ is_past_paper|yesno:"true,false" }};
    const csrfToken = '{{ csrf_token }}';
    const isAuthenticated = {{ user.is_authenticated|yesno:"true,false" }};
</script>
<script src="{% static 'js/mcq.js' %}"></script>
</body>
</html>

